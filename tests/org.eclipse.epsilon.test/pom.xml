<?xml version="1.0" encoding="UTF-8"?>
<project
	xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"
	xmlns="http://maven.apache.org/POM/4.0.0"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
	<modelVersion>4.0.0</modelVersion>
	<parent>
		<groupId>org.eclipse.epsilon</groupId>
		<artifactId>tests</artifactId>
		<version>1.6.0-SNAPSHOT</version>
	</parent>
	<artifactId>org.eclipse.epsilon.test</artifactId>
	<packaging>${packaging.type}</packaging>

	<build>
		<testSourceDirectory>${project.basedir}/src</testSourceDirectory>
		<testOutputDirectory>${project.basedir}/target/classes</testOutputDirectory>
	</build>
	<profiles>
		<profile>
			<id>plugged</id>
			<activation>
                <activeByDefault>true</activeByDefault>
            </activation>
			<build>
				<plugins>
					<plugin>
						<groupId>org.eclipse.tycho</groupId>
						<artifactId>tycho-surefire-plugin</artifactId>
						<version>${tycho.version}</version>
						<configuration>
							<application>org.eclipse.ui.ide.workbench</application>
							<useUIThread>true</useUIThread>
							<useUIHarness>true</useUIHarness>
							<includes>
								<include>org/eclipse/epsilon/test/EpsilonPluggedInTestSuite.class</include>
							</includes>
							<dependencies>
								<dependency>
									<type>eclipse-plugin</type>
									<artifactId>org.eclipse.equinox.event</artifactId>
									<version>0.0.0</version>
								</dependency>
								<dependency>
									<type>eclipse-plugin</type>
									<artifactId>org.eclipse.osgi.compatibility.state</artifactId>
									<version>0.0.0</version>
								</dependency>
								<dependency>
									<type>eclipse-plugin</type>
									<artifactId>org.eclipse.jdt.ui</artifactId>
									<version>0.0.0</version>
								</dependency>
							</dependencies>
						</configuration>
					</plugin>
				</plugins>
			</build>
			<properties>
				<packaging.type>eclipse-test-plugin</packaging.type>
				<argLine>-ea -Xmx4g</argLine>
				<tests.skip.tests>false</tests.skip.tests>
				<skipTests>${tests.skip.tests}</skipTests>
			</properties>
		</profile>
		<profile>
			<id>unit</id>
			<activation>
                <activeByDefault>false</activeByDefault>
            </activation>
			<build>
				<plugins>
					<plugin>
						<groupId>org.apache.maven.plugins</groupId>
						<artifactId>maven-surefire-plugin</artifactId>
						<version>3.0.0-M4</version>
						<configuration>
							<includes>
								<include>**/*Surefire*.java</include>
							</includes>
							<reuseForks>true</reuseForks>
							<forkCount>1</forkCount>
							<threadCount>1</threadCount>
							<threadCountSuites>1</threadCountSuites>
							<threadCountClasses>1</threadCountClasses>
							<threadCountMethods>1</threadCountMethods>
							<useUnlimitedThreads>false</useUnlimitedThreads>
						</configuration>
					</plugin>
				</plugins>
			</build>
			<properties>
				<packaging.type>eclipse-plugin</packaging.type>
				<argLine>-ea -Xms2g -Xmx8g</argLine>
			</properties>
		</profile>
	</profiles>
</project>
